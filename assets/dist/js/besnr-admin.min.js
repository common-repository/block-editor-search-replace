(()=>{"use strict";var r={};r.ajaxUrl=besnr.ajax_url,r.pluginDomain=besnr.plugin_domain,r.pluginUrl=besnr.plugin_url,r.ajaxNonce=besnr.ajax_nonce,r.ajaxRequest=function(e,n,t,a){jQuery.ajax({method:"post",url:r.ajaxUrl,data:jQuery.extend({action:e,_wpnonce:r.ajaxNonce},t),beforeSend:function(){return r.beforeSendCallback(n)},success:function(e){return a(JSON.parse(e)[0])},complete:function(){return r.completeCallback(n)},error:function(){return r.errorCallback(n)}})},r.resetSettings=function(e){e.preventDefault();var n=jQuery(e.target).closest(".besnr-admin");window.confirm("Are you sure you want to reset all the options to their defaults?")&&r.ajaxRequest("besnr_reset_options_default",n,"",function(e){e&&!1===e.success||(r.outputCallback(n,e.status,e.message),jQuery("html, body").animate({scrollTop:0},"fast"),setTimeout(function(){return document.location.reload(!0)},1e3))})},r.highlightSearchText=function(e){var n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"classic",t=(e.preventDefault(),jQuery(e.target).closest(".besnr-admin")),e={current_post_id:t.find('input[name="besnr-current-post-id"]').val(),search_phrase:t.find('input[name="besnr-search-phrase"]').val(),is_highlighted:t.find('input[name="besnr-highlight-search"]:checked').length,is_case_sensitive:t.find('input[name="besnr-case-sensitive"]:checked').length,is_classic_editor:t.find('input[name="besnr-classic-editor"]').val()};r.ajaxRequest("besnr_highlight_search_text",t,e,function(e){r.reloadEditor(e,t,n)})},r.doSearchReplace=function(e){var n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"classic",t=(e.preventDefault(),jQuery(e.target).closest(".besnr-admin")),e={current_post_id:t.find('input[name="besnr-current-post-id"]').val(),search_phrase:t.find('input[name="besnr-search-phrase"]').val(),replace_with_phrase:t.find('input[name="besnr-replace-with-phrase"]').val(),is_highlighted:t.find('input[name="besnr-highlight-search"]:checked').length,is_case_sensitive:t.find('input[name="besnr-case-sensitive"]:checked').length,is_classic_editor:t.find('input[name="besnr-classic-editor"]').val()};r.ajaxRequest("besnr_do_search_and_replace",t,e,function(e){r.reloadEditor(e,t,n)})},r.cleanAllHighlightTags=function(e){var n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"classic",t=(e.preventDefault(),jQuery(e.target).closest(".besnr-admin")),e={current_post_id:t.find('input[name="besnr-current-post-id"]').val(),is_classic_editor:t.find('input[name="besnr-classic-editor"]').val()};r.ajaxRequest("besnr_clean_tags",t,e,function(e){r.reloadEditor(e,t,n),t.find('input[name="besnr-search-phrase"]').val(""),t.find('input[name="besnr-replace-with-phrase"]').val("")})},r.reloadEditor=function(e,n,t){var a={current_post_id:n.find('input[name="besnr-current-post-id"]').val(),is_classic_editor:n.find('input[name="besnr-classic-editor"]').val()};0!==e.status&&1!==e.status||r.outputCallback(n,e.status,e.message),r.ajaxRequest("besnr_update_editor_contents",n,a,function(e){var n;e&&!1===e.success||2!==e.status||(e=JSON.parse(e.message),"classic"===t?(n=jQuery("<style/>").html("besnr-highlight { background-color: #5accf2; padding: 3px; }"),jQuery("#content_ifr").contents().find("head").append(n),jQuery("#content_ifr").contents().find("body").empty().html(e)):(n=window.wp).data.dispatch("core/block-editor").resetBlocks(n.blocks.parse(e)))})},r.beforeSendCallback=function(e){e.find(".besnr-loading-bar").show()},r.completeCallback=function(e){e.find(".besnr-loading-bar").hide()},r.errorCallback=function(e){e=e.find(".besnr-output").empty();e.addClass("besnr-output-active besnr-output-active-error"),e.html("Internal Server Error! Contact your hosting provider and access your logs to learn more about what is causing the error.")},r.outputCallback=function(e,n,t){e=e.find(".besnr-output").empty();e.removeClass("besnr-output-active-success besnr-output-active-error").addClass("besnr-output-active-"+(1===n?"success":"error")),e.addClass("besnr-output-active").show().html(t)},jQuery,jQuery(document).on("click",'button[name="besnr-reset-button"]',r.resetSettings),1==jQuery('input[name="besnr-classic-editor"]').val()&&(jQuery(document).on("blur",'input[name="besnr-search-phrase"]',r.highlightSearchText),jQuery(document).on("click",'button[name="besnr-search-replace"]',r.doSearchReplace),jQuery(document).on("click",'button[name="besnr-clean-tags"]',r.cleanAllHighlightTags))})();